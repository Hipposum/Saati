# Saati

Python code that allows you to count eigenvectors, values, and the consistency index

## –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è –≤–∏–¥–µ–æ –ø–æ —Ä–æ–ª—è–º

–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ –≤–∏–¥–µ–æ –≤ —Ç–µ–∫—Å—Ç —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ —Å–ø–∏–∫–µ—Ä–∞–º (—Ä–æ–ª—è–º).

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üé• –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ –∏–∑ –≤–∏–¥–µ–æ —Ñ–∞–π–ª–æ–≤
- üó£Ô∏è –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ —Å –ø–æ–º–æ—â—å—é OpenAI Whisper
- üë• –î–∏–∞—Ä–∏–∑–∞—Ü–∏—è —Å–ø–∏–∫–µ—Ä–æ–≤ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, –∫—Ç–æ –∏ –∫–æ–≥–¥–∞ –≥–æ–≤–æ—Ä–∏—Ç)
- üåç –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —è–∑—ã–∫–æ–≤ (—Ä—É—Å—Å–∫–∏–π, –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –∏ –¥—Ä.)
- üìÑ –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ JSON, TXT –∏ SRT —Ñ–æ—Ä–º–∞—Ç—ã
- ‚ö° –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GPU –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

2. –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ —Å–ø–∏–∫–µ—Ä–æ–≤:
   - –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [HuggingFace](https://huggingface.co/)
   - –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –Ω–∞ [https://huggingface.co/settings/tokens](https://huggingface.co/settings/tokens)
   - –ü—Ä–∏–º–∏—Ç–µ —É—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏: [pyannote/speaker-diarization-3.1](https://huggingface.co/pyannote/speaker-diarization-3.1)

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

#### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (—Ç–æ–ª—å–∫–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è)

```python
from video_transcriber import VideoTranscriber

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∞–π–±–µ—Ä–∞
transcriber = VideoTranscriber(whisper_model="base")

# –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è –≤–∏–¥–µ–æ
results = transcriber.transcribe_video(
    video_path="video.mp4",
    output_path="transcription.json",
    language="ru"
)

# –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
transcriber.print_results(results)
```

#### –° –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–µ–π —Å–ø–∏–∫–µ—Ä–æ–≤

```python
from video_transcriber import VideoTranscriber

# –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω HuggingFace
HF_TOKEN = "your_token_here"

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∞–π–±–µ—Ä–∞ —Å –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–µ–π
transcriber = VideoTranscriber(
    whisper_model="base",
    hf_auth_token=HF_TOKEN
)

# –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ —Å–ø–∏–∫–µ—Ä–∞–º
results = transcriber.transcribe_video(
    video_path="video.mp4",
    output_path="transcription.json",
    language="ru",
    num_speakers=2  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —É–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø–∏–∫–µ—Ä–æ–≤
)

# –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
transcriber.print_results(results)
```

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

```bash
# –ë–µ–∑ –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏
python video_transcriber.py video.mp4

# –° –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–µ–π
python video_transcriber.py video.mp4 your_hf_token
```

### –§–æ—Ä–º–∞—Ç—ã –≤—ã–≤–æ–¥–∞

#### JSON
```json
[
  {
    "start": 0.0,
    "end": 3.5,
    "speaker": "SPEAKER_00",
    "text": "–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?"
  },
  {
    "start": 3.5,
    "end": 6.2,
    "speaker": "SPEAKER_01",
    "text": "–û—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ!"
  }
]
```

#### TXT
```
[00:00 -> 00:03] SPEAKER_00: –ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?
[00:03 -> 00:06] SPEAKER_01: –û—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ!
```

#### SRT (—Å—É–±—Ç–∏—Ç—Ä—ã)
```
1
00:00:00,000 --> 00:00:03,500
[SPEAKER_00] –ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?

2
00:00:03,500 --> 00:00:06,200
[SPEAKER_01] –û—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ!
```

### –ú–æ–¥–µ–ª–∏ Whisper

–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –º–æ–¥–µ–ª–µ–π (–æ—Ç –º–µ–Ω—å—à–µ–≥–æ –∫ –±–æ–ª—å—à–µ–º—É):

| –ú–æ–¥–µ–ª—å | –†–∞–∑–º–µ—Ä | –ö–∞—á–µ—Å—Ç–≤–æ | –°–∫–æ—Ä–æ—Å—Ç—å |
|--------|--------|----------|----------|
| tiny   | ~75 MB | –ë–∞–∑–æ–≤–æ–µ  | –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ |
| base   | ~150 MB| –•–æ—Ä–æ—à–µ–µ  | –ë—ã—Å—Ç—Ä–æ |
| small  | ~500 MB| –û—Ç–ª–∏—á–Ω–æ–µ | –°—Ä–µ–¥–Ω–µ |
| medium | ~1.5 GB| –í—ã—Å–æ–∫–æ–µ  | –ú–µ–¥–ª–µ–Ω–Ω–æ |
| large  | ~3 GB  | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ | –û—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ |

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –Ω–∞—á–Ω–∏—Ç–µ —Å `base`, –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `medium` –∏–ª–∏ `large`.

### –ü—Ä–∏–º–µ—Ä—ã

–°–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∞–π–ª `example.py` –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

- –ë–∞–∑–æ–≤–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è
- –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è —Å –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–µ–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
- –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–∏—Ö –º–æ–¥–µ–ª–µ–π
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π workflow
- –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- FFmpeg (–¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∞—É–¥–∏–æ –∏–∑ –≤–∏–¥–µ–æ)
- CUDA (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è GPU —É—Å–∫–æ—Ä–µ–Ω–∏—è)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ FFmpeg

**Linux (Ubuntu/Debian):**
```bash
sudo apt-get install ffmpeg
```

**macOS:**
```bash
brew install ffmpeg
```

**Windows:**
–°–∫–∞—á–∞–π—Ç–µ —Å [ffmpeg.org](https://ffmpeg.org/download.html)

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GPU (CUDA):
```python
transcriber = VideoTranscriber(whisper_model="base", device="cuda")
```

2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—å—à—É—é –º–æ–¥–µ–ª—å Whisper –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
3. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –≤–∏–¥–µ–æ –ø–∞–∫–µ—Ç–∞–º–∏

### –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, —Å–æ–∑–¥–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.